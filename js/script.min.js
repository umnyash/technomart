(()=>{"use strict";var e={660:(e,t,r)=>{r.d(t,{$:()=>a});const a=async(e,t,r,a,o)=>{try{const a=await fetch(e,{method:"POST",body:t});if(!a.ok)throw new Error(`${a.status} – ${a.statusText}`);r()}catch{a()}finally{o()}}},462:(e,t,r)=>{r.d(t,{V:()=>a});const a=Object.freeze({UP_ARROW:"ArrowUp",RIGHT_ARROW:"ArrowRight",DOWN_ARROW:"ArrowDown",ESCAPE:"Escape"})},325:(e,t,r)=>{r.d(t,{p:()=>a});const a=(e,t)=>{const r={lat:59.938631,lng:30.323037},a=e.querySelector(".contacts-map .map__main"),o=L.map(a);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(o);const n=L.icon({iconUrl:"img/icons.svg#map_marker",iconSize:[52,52],iconAnchor:[26,26]});L.marker(r,{icon:n}).addTo(o),document.querySelectorAll('[data-modal-opener="map"]').forEach((a=>{a.addEventListener("click",(a=>{a.preventDefault(),t(e),o.setView(r,18),o.invalidateSize()}))}))}},247:(e,t,r)=>{r.d(t,{O:()=>o});const a="main-button--pending",o=(e,t,r,o,n)=>{const s=e.querySelector("form"),c=s.querySelector('[name="name"]'),l=s.querySelector('[name="email"]'),d=s.querySelector('[name="text"]'),i=s.querySelector('button[type="submit"]'),u=s.querySelector(".feedback-form__error-text-wrapper"),m=n(),p=s.getAttribute("action");document.querySelectorAll('[data-modal-opener="feedback"]').forEach((r=>{r.addEventListener("click",(r=>{if(r.preventDefault(),e.classList.remove("modal--error"),u.innerHTML="",t(e),c.focus(),m){const e=localStorage.getItem("name"),t=localStorage.getItem("email");e&&(c.value=e,l.focus()),t&&(l.value=t,d.focus())}}))})),c.dataset.pristineRequiredMessage="Заполните это поле.",l.dataset.pristineRequiredMessage="Заполните это поле.",l.dataset.pristineEmailMessage="Введите корректный адрес электронной почты.",d.dataset.pristineRequiredMessage="Заполните это поле.";const b=new Pristine(s,{classTo:"form__item",errorClass:"invalid",errorTextParent:"form__item",errorTextTag:"p",errorTextClass:"prompt-text"});s.addEventListener("submit",(n=>{n.preventDefault(),b.validate()?(u.innerHTML="",i.disabled=!0,i.classList.add(a),o(p,new FormData(n.target),(()=>{m&&(localStorage.setItem("name",c.value),localStorage.setItem("email",l.value)),s.reset(),r(e);const a=document.querySelector("#feedback-success-alert-modal-template").content.querySelector(".modal").cloneNode(!0);document.body.appendChild(a),t(a)}),(()=>{u.insertAdjacentHTML("beforeend",'\n          <p class="feedback-form__error-text">\n            ❌ Ошибка при оправке письма.<br> Проверьте подключение к интернету и попробуйте ещё раз.\n          </p>\n          '),e.classList.remove("modal--error"),setTimeout((()=>e.classList.add("modal--error")),50)}),(()=>{i.disabled=!1,i.classList.remove(a)}))):(e.classList.remove("modal--error"),setTimeout((()=>e.classList.add("modal--error")),50))}))}},482:(e,t,r)=>{var a=r(120),o=r(681),n=r(23),s=r(429),c=r(247),l=r(660),d=r(562),i=r(325),u=r(832);document.querySelectorAll(".slider").forEach(a.u),document.querySelectorAll(".taber").forEach(((e,t)=>{(0,o.E)(e,`taber-${t+1}`)})),document.querySelectorAll(".number-range").forEach(n.H);const m=document.querySelector(".modal--feedback");m&&(0,c.O)(m,s.h,s.M,l.$,u.Bt),document.querySelectorAll(".products-list").forEach((e=>{(0,d.s)(e,s.h,s.M,l.$)}));const p=document.querySelector(".modal--contacts-map");p&&(0,i.p)(p,s.h)},429:(e,t,r)=>{r.d(t,{M:()=>s,h:()=>n});var a=r(832);const o=[],n=e=>{e.classList.add("modal--open"),o.push(e),document.addEventListener("keydown",c),document.addEventListener("click",l)},s=e=>{e.classList.add("modal--closing"),o.pop(),document.removeEventListener("keydown",c),document.removeEventListener("click",l),setTimeout((()=>{e.classList.remove("modal--open"),e.classList.remove("modal--closing"),e.classList.contains("modal--alert")&&e.remove()}),300)};function c(e){(0,a.nC)(e)&&(e.preventDefault(),s(o[o.length-1]))}function l({target:e}){(e.classList.contains("modal")||e.classList.contains("modal__close"))&&s(o[o.length-1])}},23:(e,t,r)=>{r.d(t,{H:()=>a});const a=e=>{const t=e.querySelector(".number-range__range"),r=e.querySelector(".number-range__min input"),a=e.querySelector(".number-range__max input");noUiSlider.create(t,{start:[r.value,a.value],connect:!0,range:{min:+r.min,max:+a.max},step:+t.dataset.step,format:{to:e=>Math.round(e),from:e=>parseFloat(e)}}),t.noUiSlider.on("update",(()=>{r.value=t.noUiSlider.get()[0],a.value=t.noUiSlider.get()[1]}));const o=e=>{t.noUiSlider.set(e.currentTarget===r?[e.currentTarget.value,null]:[null,e.currentTarget.value],!0,!0)};r.addEventListener("change",o),a.addEventListener("change",o)}},562:(e,t,r)=>{r.d(t,{s:()=>o});const a="button--pending",o=(e,t,r,o)=>{e.addEventListener("click",(e=>{const n=e.target.closest(".product__buy-button");n&&(e.preventDefault(),n.disabled=!0,n.classList.add(a),o("https://echo.htmlacademy.ru","product ID",(()=>{const e=document.querySelector("#add-cart-success-alert-modal-template").content.querySelector(".modal").cloneNode(!0);e.querySelector(".alert__close-button").addEventListener("click",(t=>{t.preventDefault(),r(e)})),document.body.appendChild(e),t(e)}),(()=>{const e=document.querySelector("#add-cart-error-alert-modal-template").content.querySelector(".modal").cloneNode(!0);document.body.appendChild(e),t(e)}),(()=>{n.disabled=!1,n.classList.remove(a)})))}))}},120:(e,t,r)=>{r.d(t,{u:()=>a});const a=e=>{new Splide(e,{type:"fade",rewind:"true",waitForTransition:!0,classes:{arrows:"slider__navigation",arrow:"slider__navigation-button",prev:"slider__navigation-button--prev",next:"slider__navigation-button--next",pagination:"slider__pagination",page:"slider__pagination-button"}}).mount()}},681:(e,t,r)=>{r.d(t,{E:()=>o});var a=r(832);const o=(e,t)=>{const r=e.querySelector(".taber__list"),o=Array.from(r.querySelectorAll(".taber__tab")),n=e.querySelectorAll(".taber__panel");r.setAttribute("role","tablist"),o.forEach(((e,r)=>{e.role="tab",e.id=`${t}-tab-${r+1}`,e.tabIndex=-1,e.parentNode.role="presentation"})),n.forEach(((e,t)=>{e.role="tabpanel",e.tabIndex=-1,e.setAttribute("aria-labelledby",o[t].id),e.classList.add("taber__panel--hidden")}));const s=(e,t,r)=>{if(e){e.ariaSelected=null,e.tabIndex=-1,e.classList.remove("taber__tab--active");const t=o.indexOf(e);n[t].classList.add("taber__panel--hidden")}r||t.focus(),t.tabIndex=0,t.ariaSelected=!0,t.classList.add("taber__tab--active");const a=o.indexOf(t);n[a].classList.remove("taber__panel--hidden")};s(null,o[0],!0),r.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest(".taber__tab");if(!t)return;const a=r.querySelector("[aria-selected]");t!==a&&s(a,t)})),r.addEventListener("keydown",(e=>{const t=o.indexOf(e.target);if((0,a.F2)(e)||(0,a.Id)(e)||(0,a.E0)(e))if(e.preventDefault(),(0,a.Id)(e))n[t].focus();else{const r=(0,a.F2)(e)?t-1:t+1;if(!o[r])return;s(e.target,o[r])}}))}},832:(e,t,r)=>{r.d(t,{Bt:()=>l,E0:()=>s,F2:()=>o,Id:()=>n,nC:()=>c});var a=r(462);const o=e=>e.code===a.V.UP_ARROW,n=e=>e.code===a.V.RIGHT_ARROW,s=e=>e.code===a.V.DOWN_ARROW,c=e=>e.code===a.V.ESCAPE,l=()=>{let e=!0;try{localStorage.getItem("test")}catch(t){e=!1}return e}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(660),r(462),r(325),r(247),r(482),r(429),r(23),r(562),r(120),r(681),r(832)})();